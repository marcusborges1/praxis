<div class="col-md-6 col-md-offset-3">
  <div class="panel panel-primary">
    <div class="panel-heading">Adicionar acompanhados</div>
     <div class="panel-body">

       <%= form_for(@user, :url => { :action => :add_monitors }, html: { class: "form-horizontal" }) do |f| %>
         <% if @user.errors.any? %>
           <div id="error_explanation" class="alert alert-danger">
             <h2><%= pluralize(user.errors.count, "error") %> prohibited this user from being updated:</h2>

             <ul>
               <% user.errors.full_messages.each do |message| %>
                 <li><%= message %></li>
               <% end %>
             </ul>
           </div>
         <% end %>

         <div class="form-group">
        <%= fields_for :monitors do |ff| %>
          <% @users.each do |u| %>
             <%= ff.label :name, u.name, class: "col-sm-2 control-label" %>
               <% if u.monitor_id == @user.id %>
                 <div class="col-sm-4">
                   <%= ff.check_box :user_id, {class: "form-control", multiple: true, checked: true} , u.id, nil %>
                 </div>
              <% else %>
                <div class="col-sm-4">
                  <%= ff.check_box :user_id, {class: "form-control", multiple: true} , u.id, nil %>
                </div>
            <%end%>
          <% end %>
        <%end %>
      </div>

         <%= f.submit "Atualizar", class: "btn btn-primary" %>
       <% end %>

    </div>
    <div class="panel-footer">
      <%= link_to 'Ver detalhes', @user, class: "btn btn-primary" %>
      <%= link_to 'Voltar', users_path, class: "btn btn-default" %>
    </div>
  </div>
</div>
